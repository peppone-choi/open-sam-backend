# 삼국지 (Samgukji) 프로젝트 TODO 리스트

> 앞으로 진행할 작업 목록 및 우선순위

**작성일**: 2025-12-06

---

## 🚀 우선순위 1: 핵심 기능 완성 (Core Features)

- [ ] **명예의 전당 (Hall of Fame)**
  - [ ] 통일 시 역사 기록 저장 (연도, 통일 국가, 군주, 주요 장수)
  - [ ] 역대 통일 기록 조회 API 구현
  - [ ] 명예의 전당 UI (프론트엔드 연동 필요)

- [ ] **통계 및 랭킹 시스템**
  - [ ] 장수 랭킹 (능력치, 공적, 전적 등)
  - [ ] 국가 랭킹 (국력, 인구, 병력 등)
  - [ ] 랭킹 조회 API

- [ ] **전투 리플레이 (Battle Replay)**
  - [ ] 전투 로그를 기반으로 리플레이 데이터 구조 설계
  - [ ] 전투 종료 시 리플레이 데이터 저장
  - [ ] (프론트) 리플레이 재생 기능

## 🛠️ 우선순위 2: 리팩토링 (Refactoring)

- [ ] **ProcessWar.ts 분리** (Critical)
  - [ ] 전투 초기화/종료 로직 분리
  - [ ] 턴 처리 로직 분리 (`BattleTurnService`)
  - [ ] 전투 계산 로직 분리 (`BattleCalculationService`)
  - [ ] 스킬/계략 처리 로직 분리 (`BattleSkillService`)

- [ ] **이벤트 훅 시스템 개선**
  - [ ] `BattleEventHook.service.ts` (1000줄+) 분리
  - [ ] 트리거 시스템 표준화 (Event Emitter 패턴 도입 고려)

- [ ] **공통 로직 추출**
  - [ ] 커맨드 유효성 검사 로직 (`ValidatorService`)
  - [ ] 자원 처리 로직 통합 (`ResourceService`)

## 🧪 우선순위 3: 테스트 및 안정화 (Testing & Stabilization)

- [ ] **E2E 테스트 시나리오**
  - [ ] 전체 전쟁 사이클 (선전포고 -> 출병 -> 전투 -> 점령 -> 멸망) 테스트
  - [ ] 내정 사이클 (투자 -> 턴 넘김 -> 자원 증가) 테스트
  - [ ] 인사 사이클 (등용 -> 임명 -> 배신/사망) 테스트

- [ ] **유닛 테스트 보강**
  - [ ] `ProcessWar` 분리 후 각 서비스별 유닛 테스트
  - [ ] 엣지 케이스 테스트 (자원 부족, 장수 0명 등)

- [ ] **성능 최적화**
  - [ ] 턴 처리 속도 최적화 (대규모 국가/장수 시뮬레이션)
  - [ ] 데이터베이스 쿼리 최적화 (N+1 문제 등 재점검)

## 🎨 우선순위 4: 프론트엔드 연동 (Frontend Integration)

- [ ] **전투 UI 개선**
  - [ ] 턴제 전투 시각화
  - [ ] 스킬 발동 이펙트

- [ ] **지도 인터페이스**
  - [ ] 육각형(Hex) 또는 그리드 맵 구현
  - [ ] 도시/관문/항구 표시
  - [ ] 부대 이동 경로 표시

---

## 📝 메모
- `ProcessWar.ts` 리팩토링은 시스템 안정성을 위해 가장 시급함.
- 명예의 전당은 게임의 완결성을 위해 필요함.








