# Session 1: WarUnit 전투 시스템 핵심 구조

## 목표
WarUnit 추상 클래스 및 WarUnitGeneral, WarUnitCity 구현

## 작업 목록

### 1. src/battle/WarUnit.ts (추상 클래스)
참고: core/hwe/WarUnit.php

필수 메서드:
```typescript
abstract class WarUnit {
  abstract getWarPower(): number;
  abstract getDefencePower(): number;
  abstract damage(amount: number): void;
  abstract isDead(): boolean;
  abstract getRemainCrewCount(): number;
  // ... 기타 전투 관련 메서드
}
```

### 2. src/battle/WarUnitGeneral.ts
참고: core/hwe/WarUnitGeneral.php

- 장수 병력 데이터 연동
- 능력치 (리더십, 무력, 지력) 적용
- 병종 상성 계산
- 아이템 효과 적용

### 3. src/battle/WarUnitCity.ts
참고: core/hwe/WarUnitCity.php

- 도시 수비군 데이터 연동
- 성벽 방어력 계산
- 함정 효과 적용

### 4. 테스트: src/battle/__tests__/WarUnit.test.ts
- WarUnitGeneral 전투력 계산 검증
- WarUnitCity 방어력 계산 검증
- PHP와 결과 비교 (10개 시나리오)

## 검증 기준
- [ ] WarUnitGeneral.getWarPower() === PHP 결과 (오차 <1%)
- [ ] WarUnitCity.getDefencePower() === PHP 결과 (오차 <1%)
- [ ] TypeScript 컴파일 에러 0개
- [ ] 테스트 통과율 100%

## 완료 시
- coordination/backend-progress.md 업데이트
- PHP 비교 결과 로그 저장: d_log/2025-11-23_session-1-war-unit.log
